<header class="fixed top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-gray-200/60 bg-white/80 px-4 md:px-6 lg:px-10 py-3 md:py-4 backdrop-blur-sm" 
        [class.with-sidebar]="hasSidebar"
        [class.logged-in]="isLoggedIn">
  <!-- Logo Section - Only show when not logged in -->
  <div *ngIf="!isLoggedIn" class="flex items-center gap-2 md:gap-3 text-slate-800">
    <img src="/qb-logo-2.png" alt="Quanby Health Logo" class="h-6 w-6 md:h-8 md:w-8">
    <h2 class="header-title text-slate-800 text-lg md:text-xl font-bold leading-tight tracking-tight">Quanby Health</h2>
  </div>

  <!-- Desktop Navigation -->
  <div class="hidden lg:flex flex-1 justify-end gap-6">
    <!-- Not Logged In -->
    <nav *ngIf="!isLoggedIn" class="flex items-center gap-8">
      <a class="text-gray-600 hover:text-slate-800 text-sm font-medium leading-normal transition-colors" href="#">Home</a>
      <a class="text-gray-600 hover:text-slate-800 text-sm font-medium leading-normal transition-colors" href="#features">Features</a>
      <a class="text-gray-600 hover:text-slate-800 text-sm font-medium leading-normal transition-colors" href="#how-it-works">How it Works</a>
      <a (click)="navigateToLogin()" class="text-gray-600 hover:text-slate-800 text-sm font-medium leading-normal transition-colors cursor-pointer">Login</a>
    </nav>
    
    <!-- Logged In User -->
    <div *ngIf="isLoggedIn" class="flex items-center gap-6">
      <button 
        (click)="navigateToProfile()"
        class="flex items-center gap-3 hover:bg-gray-50 p-2 rounded-lg transition-colors cursor-pointer group"
      >
        <div class="text-right">
          <p class="text-sm font-medium text-slate-800 group-hover:text-sky-600 transition-colors">{{ getUserDisplayName() }}</p>
          <p class="text-xs text-gray-500 capitalize group-hover:text-sky-500 transition-colors">{{ currentUser?.role }}</p>
        </div>
        <div class="w-8 h-8 bg-sky-500 rounded-full flex items-center justify-center group-hover:bg-sky-600 transition-colors">
          <span class="text-white text-sm font-medium">{{ getUserDisplayName().charAt(0) }}</span>
        </div>
      </button>
    </div>
    
    <div class="flex gap-3">
      <!-- Not Logged In -->
      <button *ngIf="!isLoggedIn" (click)="navigateToRegister()" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-transparent border border-sky-500 text-slate-800 text-sm font-bold leading-normal tracking-[0.015em] hover:bg-sky-500/10 transition-colors">
        <span class="truncate">Sign Up</span>
      </button>
      
      <!-- Try Demo - Only for non-logged in users -->
      <button *ngIf="!isLoggedIn" (click)="navigateToFaceScan()" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-5 bg-sky-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-opacity-90 transition-opacity">
        <span class="truncate">Try Demo</span>
      </button>
    </div>
  </div>

  <!-- Mobile Menu Button -->
  <button 
    (click)="toggleMobileMenu()" 
    class="mobile-menu-button lg:hidden flex items-center justify-center w-10 h-10 rounded-lg hover:bg-gray-100 transition-colors"
    aria-label="Toggle mobile menu"
  >
    <svg class="hamburger-icon w-6 h-6 text-slate-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            [attr.d]="isMobileMenuOpen ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h16'">
      </path>
    </svg>
  </button>

  <!-- Mobile Menu Overlay -->
  <div 
    [class.hidden]="!isMobileMenuOpen"
    class="mobile-menu-overlay lg:hidden fixed inset-0 top-16 border-t border-gray-200 z-40"
    style="background-color: #ffffff;"
  >
    <nav class="mobile-menu-content flex flex-col p-4 space-y-4">
      <!-- Not Logged In -->
      <div *ngIf="!isLoggedIn">
        <a (click)="closeMobileMenu()" class="mobile-nav-link text-gray-600 hover:text-slate-800 text-base font-medium leading-normal transition-colors py-2" href="#">Home</a>
        <a (click)="closeMobileMenu()" class="mobile-nav-link text-gray-600 hover:text-slate-800 text-base font-medium leading-normal transition-colors py-2" href="#features">Features</a>
        <a (click)="closeMobileMenu()" class="mobile-nav-link text-gray-600 hover:text-slate-800 text-base font-medium leading-normal transition-colors py-2" href="#how-it-works">How it Works</a>
        <a (click)="navigateToLogin()" class="mobile-nav-link text-gray-600 hover:text-slate-800 text-base font-medium leading-normal transition-colors py-2 cursor-pointer">Login</a>
        
        <!-- Mobile Buttons -->
        <div class="flex flex-col gap-3 pt-4 border-t border-gray-200">
          <button (click)="navigateToRegister()" class="flex items-center justify-center rounded-lg h-12 px-5 bg-transparent border border-sky-500 text-slate-800 text-base font-bold leading-normal tracking-[0.015em] hover:bg-sky-500/10 transition-colors">
            Sign Up
          </button>
          <button (click)="navigateToFaceScan()" class="flex items-center justify-center rounded-lg h-12 px-5 bg-sky-500 text-white text-base font-bold leading-normal tracking-[0.015em] hover:bg-opacity-90 transition-opacity">
            Try Demo
          </button>
        </div>
      </div>
      
      <!-- Logged In User -->
      <div *ngIf="isLoggedIn">
        <button 
          (click)="navigateToProfile(); closeMobileMenu()"
          class="w-full flex items-center gap-3 p-3 bg-gray-50 rounded-lg mb-4 hover:bg-gray-100 transition-colors cursor-pointer group"
        >
          <div class="w-10 h-10 bg-sky-500 rounded-full flex items-center justify-center group-hover:bg-sky-600 transition-colors">
            <span class="text-white text-sm font-medium">{{ getUserDisplayName().charAt(0) }}</span>
          </div>
          <div>
            <p class="text-sm font-medium text-slate-800 group-hover:text-sky-600 transition-colors">{{ getUserDisplayName() }}</p>
            <p class="text-xs text-gray-500 capitalize group-hover:text-sky-500 transition-colors">{{ currentUser?.role }}</p>
          </div>
        </button>
        
        <div class="flex flex-col gap-3 pt-4 border-t border-gray-200">
          <p class="text-sm text-gray-500 text-center">Navigation available in sidebar</p>
        </div>
      </div>
    </nav>
  </div>
</header> 