<div class="notifications-page">
  <!-- Header -->
  <div class="notifications-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">Notifications</h1>
        <span class="unread-badge" *ngIf="unreadCount > 0">{{ unreadCount }} unread</span>
      </div>
      <button 
        *ngIf="unreadCount > 0"
        class="mark-all-btn"
        (click)="markAllAsRead()"
        title="Mark all as read">
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Mark All as Read
      </button>
    </div>
  </div>

  <!-- Filters -->
  <div class="filters-section">
    <button 
      class="filter-btn"
      [class.active]="currentFilter === 'all'"
      (click)="setFilter('all')">
      <span class="filter-label">All</span>
      <span class="filter-count">{{ notifications.length }}</span>
    </button>
    <button 
      class="filter-btn"
      [class.active]="currentFilter === 'unread'"
      (click)="setFilter('unread')">
      <span class="filter-label">Unread</span>
      <span class="filter-count">{{ unreadCount }}</span>
    </button>
    <button 
      class="filter-btn"
      [class.active]="currentFilter === 'read'"
      (click)="setFilter('read')">
      <span class="filter-label">Read</span>
      <span class="filter-count">{{ notifications.length - unreadCount }}</span>
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading notifications...</p>
  </div>

  <!-- Notifications List -->
  <div *ngIf="!isLoading" class="notifications-list">
    <!-- Empty State -->
    <div *ngIf="filteredNotifications.length === 0" class="empty-state">
      <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
      </svg>
      <h3>No notifications</h3>
      <p>You're all caught up! No {{ currentFilter }} notifications at the moment.</p>
    </div>

    <!-- Notification Items -->
    <div 
      *ngFor="let notification of filteredNotifications"
      class="notification-item"
      [class.unread]="!notification.isRead"
      (click)="markAsRead(notification)">
      
      <!-- Type Icon -->
      <div class="notification-icon">
        <span class="type-emoji">{{ getTypeIcon(notification.type) }}</span>
      </div>

      <!-- Content -->
      <div class="notification-content">
        <div class="notification-header">
          <h3 class="notification-title">{{ notification.title }}</h3>
          <span class="notification-time">{{ getTimeAgo(notification.createdAt) }}</span>
        </div>
        
        <p class="notification-message">{{ notification.message }}</p>
        
        <div class="notification-footer">
          <span class="priority-badge" [ngClass]="getPriorityClass(notification.priority)">
            {{ notification.priority }}
          </span>
          <span class="type-badge">{{ notification.type }}</span>
        </div>
      </div>

      <!-- Actions -->
      <div class="notification-actions">
        <!-- Mark as Read/Unread -->
        <button 
          *ngIf="notification.isRead"
          class="action-btn"
          (click)="markAsUnread(notification, $event)"
          title="Mark as unread">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 19v-8.93a2 2 0 01.89-1.664l7-4.666a2 2 0 012.22 0l7 4.666A2 2 0 0121 10.07V19M3 19a2 2 0 002 2h14a2 2 0 002-2M3 19l6.75-4.5M21 19l-6.75-4.5M3 10l6.75 4.5M21 10l-6.75 4.5m0 0l-1.14.76a2 2 0 01-2.22 0l-1.14-.76"></path>
          </svg>
        </button>
        
        <!-- Archive -->
        <button 
          class="action-btn"
          (click)="archiveNotification(notification.id, $event)"
          title="Archive">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
          </svg>
        </button>
        
        <!-- Delete -->
        <button 
          class="action-btn delete-btn"
          (click)="deleteNotification(notification.id, $event)"
          title="Delete">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
          </svg>
        </button>
      </div>

      <!-- Unread Indicator -->
      <div *ngIf="!notification.isRead" class="unread-indicator"></div>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="!isLoading && filteredNotifications.length > 0 && getTotalPages() > 1" class="pagination">
    <button 
      class="pagination-btn"
      [disabled]="currentPage === 1"
      (click)="previousPage()">
      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      Previous
    </button>
    
    <span class="pagination-info">
      Page {{ currentPage }} of {{ getTotalPages() }} ({{ totalItems }} total)
    </span>
    
    <button 
      class="pagination-btn"
      [disabled]="!hasMore"
      (click)="nextPage()">
      Next
      <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </div>
</div>
