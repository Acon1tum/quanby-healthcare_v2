<div class="meet-container">
  <!-- Header Section -->
  <div class="meet-header">
    <div class="header-content">
      <div class="logo-section">
        <img src="/qb-logo-2.png" alt="QHealth Logo" class="logo">
        <h1 class="title">Doctor Consultation</h1>
      </div>
      <div class="room-info">
        <div class="room-id">
          <span class="label">Room ID:</span>
          <span class="value">{{ roomId || 'Not Set' }}</span>
        </div>
        <div class="participants">
          <span class="label">Participants:</span>
          <span class="value">{{ participants() }}/2</span>
        </div>
        <div class="role">
          <span class="label">Role:</span>
          <span class="value role-badge">{{ currentRole() || 'Not Assigned' }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="meet-content">
    <!-- Video Grid -->
    <div class="video-grid">
      <!-- Local Video -->
      <div class="video-container local-video">
        <video #localVideo autoplay muted playsinline></video>
        <div class="video-overlay">
          <div class="video-label">
            <i class="fas fa-user-md"></i>
            <span>You (Doctor)</span>
          </div>
          <div class="video-status">
            <div class="status-indicator active"></div>
            <span>Live</span>
          </div>
        </div>
      </div>

      <!-- Remote Video -->
      <div class="video-container remote-video" *ngIf="remoteStream; else waitingMessage">
        <video #remoteVideo autoplay playsinline></video>
        <div class="video-overlay">
          <div class="video-label">
            <i class="fas fa-user"></i>
            <span>Patient</span>
          </div>
          <div class="video-status">
            <div class="status-indicator active"></div>
            <span>Connected</span>
          </div>
        </div>
      </div>

      <!-- Waiting Message -->
      <ng-template #waitingMessage>
        <div class="waiting-container">
          <div class="waiting-content">
            <div class="waiting-icon">
              <i class="fas fa-clock"></i>
            </div>
            <h3>Waiting for Patient</h3>
            <p>Please wait while the patient joins the consultation room.</p>
            <div class="loading-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </ng-template>
    </div>

    <!-- Controls Section -->
    <div class="controls-section">
      <div class="room-controls">
        <div class="input-group">
          <input 
            type="text" 
            [(ngModel)]="roomId" 
            placeholder="Enter Room ID" 
            class="room-input"
            [disabled]="isJoined()"
          >
          <button 
            (click)="join()" 
            class="btn btn-primary"
            [disabled]="!roomId || isJoined()"
          >
            <i class="fas fa-sign-in-alt"></i>
            Join Room
          </button>
        </div>
      </div>

      <div class="call-controls" *ngIf="isJoined()">
        <button class="control-btn refresh-btn" (click)="refreshRemoteStream()" title="Refresh Stream">
          <i class="fas fa-sync-alt"></i>
        </button>
        <button class="control-btn leave-btn" (click)="leave()" title="Leave Call">
          <i class="fas fa-phone-slash"></i>
        </button>
      </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="connection-status">
        <div class="status-item">
          <i class="fas fa-wifi"></i>
          <span>WebRTC Connected</span>
        </div>
        <div class="status-item">
          <i class="fas fa-video"></i>
          <span>Local Camera Active</span>
        </div>
        <div class="status-item" *ngIf="remoteStream">
          <i class="fas fa-user-check"></i>
          <span>Patient Connected</span>
        </div>
      </div>
    </div>
  </div>
</div>
